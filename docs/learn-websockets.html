<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="Point Network" href="/opensearch.xml">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:400,700&display=swap">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css">
<script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script src="../js/custom.js"></script><title data-react-helmet="true">Web Sockets | Point Network</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://pointnetwork.github.io/docs/learn-websockets"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Web Sockets | Point Network"><meta data-react-helmet="true" name="description" content="WebSocket Endpoints"><meta data-react-helmet="true" property="og:description" content="WebSocket Endpoints"><link data-react-helmet="true" rel="icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://pointnetwork.github.io/docs/learn-websockets"><link data-react-helmet="true" rel="alternate" href="https://pointnetwork.github.io/docs/learn-websockets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://pointnetwork.github.io/docs/learn-websockets" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.805d424d.css">
<link rel="preload" href="/assets/js/runtime~main.2a9d12a5.js" as="script">
<link rel="preload" href="/assets/js/main.a917dc54.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="http://pointnetwork.github.io/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/point-logo.svg" alt="Point Network" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/point-logo.svg" alt="Point Network" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Point Network</b></a><a class="navbar__item navbar__link" href="/docs/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/docs/use-index">Use</a><a class="navbar__item navbar__link" href="/docs/learn-index">Learn</a><a class="navbar__item navbar__link" href="/docs/build-index">Build</a><a class="navbar__item navbar__link" href="/docs/maintain-index">Maintain</a><a class="navbar__item navbar__link" href="/api">API</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/contributing">Contribute</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/getting-started">General</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/learn-index">Learn</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-index">Learner&#x27;s Portal</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/learn-architecture">Basics</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-storage-layer">Storage Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-point-deployer">Point Deployer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn-websockets">Web Sockets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/filecoin-vs-pointstorage">Filecoin vs Point Storage</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/learn-layer2-payments">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/learn-cryptography">Cryptography</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn-video-tutorials">Video Tutorials</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/build-index">Build</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/maintain-index">Maintain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/use-index">Use</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Web Sockets</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="websocket-endpoints">WebSocket Endpoints<a class="hash-link" href="#websocket-endpoints" title="Direct link to heading">​</a></h2><p>The Point Network node has two WebSocket endpoints defined:</p><ul><li><code>NodeSocketController</code> which is used for internal socket connections and is exposed on the Nodes internal API port.</li><li><code>ZProxySocketController</code> which is used for for handling ZApp websocket connections via the ZProxy API port.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="connecting-to-the-nodesocketcontroller">Connecting to the NodeSocketController<a class="hash-link" href="#connecting-to-the-nodesocketcontroller" title="Direct link to heading">​</a></h3><p>This is exposed on the Nodes internal API port. The routes are defined in <a href="https://github.com/pointnetwork/pointnetwork/blob/master/api/ws_routes.js" target="_blank" rel="noopener noreferrer">ws_routes.js</a> and the endpoint is served using Fastify WebSockets. Its possible to try out this socket using the <code>WebSocket Test client</code> (see below for details).</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="using-the-websocket-test-client">Using the WebSocket Test client<a class="hash-link" href="#using-the-websocket-test-client" title="Direct link to heading">​</a></h4><p>You can start the <code>WebSocket Test client</code> using the following at the terminal:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">node scripts/ws/clientTest.js</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Check out the terminal for details.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="connecting-to-the-zproxysocketcontroller">Connecting to the ZProxySocketController<a class="hash-link" href="#connecting-to-the-zproxysocketcontroller" title="Direct link to heading">​</a></h3><p>This is exposed on the ZProxy API port. The connection is made via the ZApp domain root. For example, if the ZApp domain is <code>example.z</code> then the WebSocket connection can be made at <code>wss://example.z</code>. See the <a href="https://github.com/pointnetwork/pointnetwork/tree/master/example/hello.z" target="_blank" rel="noopener noreferrer">hello.z</a> demo app for examples.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="websocket-request-messages">WebSocket Request Messages<a class="hash-link" href="#websocket-request-messages" title="Direct link to heading">​</a></h3><p>To issue a command via a WebSocket, send a payload request in this form:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{type: &#x27;&#x27;, params: &#x27;&#x27;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Where <code>type</code> is the command type and <code>params</code> are the command parameters.</p><p>For example, to subscribe to a Smart Contract event via the <code>ZProxySocketController</code> send the following payload:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{type: &#x27;subscribeContractEvent&#x27;, params: {contract: &#x27;&#x27;, event: &#x27;&#x27;}}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Where <code>subscribeContractEvent</code> is the command type for subscribing to Smart Contract events and the <code>params</code> contains an object with the keys <code>contract</code> that specifies the contract name and <code>event</code> that specifies the name of the event to subscribe to.</p><p>For example, to subscribe to the <code>ProductSoldEvent</code> in the <code>Store</code> Smart Contract of the <code>store.z</code> app, you would issue the following command to the already connected websocket (via <code>wss://store.z</code>):</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{ type: &#x27;subscribeContractEvent&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  params: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    contract: &#x27;Store&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    event: &#x27;ProductSoldEvent&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="websocket-response-messages">WebSocket Response Messages<a class="hash-link" href="#websocket-response-messages" title="Direct link to heading">​</a></h3><p>Messages sent from the Node socket to the client will always echo the original command object (containing the <code>type</code> and <code>params</code> keys) that was used to initiate the call or the subscripton. The payload will also contain three other keys: <code>data</code> (containing the acutal response data from the call or subscription), <code>event</code> (denotes if this is data from the call or a message from the socket related to the command) and <code>hostname</code> (the hostname / domain of the app that requested this message).</p><p>Essentially there will be three event types of response message to handle:</p><ul><li><code>SUBSCRIBED_EVENT</code> - sent when a subscription command has successfully SUBSCRIBED</li><li><code>UNSUBSCRIBED_EVENT</code> - sent when a subscription command has successfully UNSUBSCRIBED</li><li><code>DATA_EVENT</code> - sent when there is an event emitted on the subscribed subscription or a call is returning data</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="subscribed_event-payload">SUBSCRIBED_EVENT payload<a class="hash-link" href="#subscribed_event-payload" title="Direct link to heading">​</a></h3><p>A <code>SUBSCRIBED_EVENT</code> occurs when subscription command has successfully subscribed, for example to a specific event on a smart contract. When this happens a message is returned to the client of event type <code>SUBSCRIBED_EVENT</code> so that the client application knows the subscription is sucessful.</p><p>For example, the response from subsribing to the <code>ProductSoldEvent</code> on the <code>Store</code> smart contract would be:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &quot;store.z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;subscribeContractEvent&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Store&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;ProductSoldEvent&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;subscriptionId&quot;: &quot;0xa&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;message&quot;: &quot;Subscribed to Store contract ProductSoldEvent events&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;SUBSCRIBED_EVENT&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (store.z) and that the <code>data</code> key contains an object with the actual <code>subscriptionId</code> associated with the subscription (keep that for unsubscribing later!) and a <code>message</code> key. The <code>event</code> is set to <code>SUBSCRIBED_EVENT</code>.</p><p>The client app can filter for its own hostname and for this type of event to react accordingly when the subscription is successfully established.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="unsubscribed_event-payload">UNSUBSCRIBED_EVENT payload<a class="hash-link" href="#unsubscribed_event-payload" title="Direct link to heading">​</a></h3><p>A <code>UNSUBSCRIBED_EVENT</code> occurs when a subscription command has successfully unsubscribed to a specific subscription by id.  When this happens a message is returned to the client of event type <code>UNSUBSCRIBED_EVENT</code> so that the client application knows the subscription has been sucessfully removed.</p><p>For example, the response from unsubsribing to the <code>ProductSoldEvent</code> on the <code>Store</code> Smart Contract via the <code>subscriptionId</code> = <code>0xa</code> would be:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &quot;store.z&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;removeSubscriptionById&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Store&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;ProductSoldEvent&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;subscriptionId&quot;: &quot;0xa&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;message&quot;: &quot;Unsubscribed from Store contract ProductSoldEvent events using subscription id 0xa&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;UNSUBSCRIBED_EVENT&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (store.z) and that the <code>data</code> key contains an object with a single <code>message</code> key. The <code>event</code> is set to <code>UNSUBSCRIBED_EVENT</code>.</p><p>The client app can filter for its own hostname and for this type of event to react accordingly when the subscription is successfully removed.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="data_event-payload">DATA_EVENT payload<a class="hash-link" href="#data_event-payload" title="Direct link to heading">​</a></h3><p>A <code>DATA_EVENT</code> is sent when there is an event emitted on the subscribed subscription or a call is returning data. So this is the most common event type since its emitted when an event is emiited on the subsription.</p><p>For example, in the <code>Hello.z</code> example app, the client subscribes to the <code>UpdatedValue</code> event in the <code>Hello</code> Smart Contract. Since that event is defined in the Smart Contract as <code>event UpdatedValue(string oldValue, string newValue);</code> then the <code>data.returnValues</code> key of the message will contain an object with the keys <code>oldValue</code> and <code>newValue</code>. See an example payload message from the socket below:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;hostname&quot;: &#x27;hello.z&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;type&quot;: &quot;subscribeContractEvent&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;params&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;contract&quot;: &quot;Hello&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;UpdatedValue&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;logIndex&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;transactionIndex&quot;: 0,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;transactionHash&quot;: &quot;0xf525ddb1069d66855137878c66fc66092005b1731557119880c0e552880fc3d8&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockHash&quot;: &quot;0x53d60db399b1d85e529d64f901729b5840230abdb9c01233db5bbc97bf4a6e75&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;blockNumber&quot;: 38,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;address&quot;: &quot;0xC986038239801F079336e6F69438aABC0eE46487&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;type&quot;: &quot;mined&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;removed&quot;: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;log_14c3a8ce&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;returnValues&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;0&quot;: &quot;Hello from the Blockchain!&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;1&quot;: &quot;I will update the value now&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;oldValue&quot;: &quot;Hello from the Blockchain!&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;newValue&quot;: &quot;I will update the value now&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;event&quot;: &quot;UpdatedValue&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;signature&quot;: &quot;0x4ccb6d79c8056228aebdc79cd2e1894d9b4c61edabcac2abe454385b06302384&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;raw&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;data&quot;: &quot;0x000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000008434f5649442d31390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008434f5649442d3139000000000000000000000000000000000000000000000000&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;topics&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;0x4ccb6d79c8056228aebdc79cd2e1894d9b4c61edabcac2abe454385b06302384&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;event&quot;: &quot;DATA_EVENT&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that the original command payload is echod back (<code>type</code> and <code>params</code>), the <code>hostname</code> is set to that of the caller app domain (hello.z) and that the <code>data</code> key contains an object with the full smart contract event payload so that the client can use any of this available data. Mostly, in this case, the client will be interestedin the <code>returnValues</code> key which contains the keys of the event as defined in the smart contract (in this case <code>oldValue</code> and <code>newValue</code>). Finally, the <code>event</code> key is set to <code>DATA_EVENT</code> to denote that this message contains actual data from the subscriotion or call that was made via the WebSocket.</p><p>The client app can filter for this type of event to react accordingly when the subscription or call returns data that the client is interested in. See the <code>hello.z</code> demo application for examples of this.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/pointnetwork/pointnetwork.github.io/edit/main/website/docs/learn/learn-websockets.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-04-16T05:33:49.000Z">4/16/2022</time></b> by <b>Darren Jensen</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/learn-point-deployer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Point Deployer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/filecoin-vs-pointstorage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Filecoin vs Point Storage</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#websocket-endpoints" class="table-of-contents__link toc-highlight">WebSocket Endpoints</a><ul><li><a href="#connecting-to-the-nodesocketcontroller" class="table-of-contents__link toc-highlight">Connecting to the NodeSocketController</a></li><li><a href="#connecting-to-the-zproxysocketcontroller" class="table-of-contents__link toc-highlight">Connecting to the ZProxySocketController</a></li><li><a href="#websocket-request-messages" class="table-of-contents__link toc-highlight">WebSocket Request Messages</a></li><li><a href="#websocket-response-messages" class="table-of-contents__link toc-highlight">WebSocket Response Messages</a></li><li><a href="#subscribed_event-payload" class="table-of-contents__link toc-highlight">SUBSCRIBED_EVENT payload</a></li><li><a href="#unsubscribed_event-payload" class="table-of-contents__link toc-highlight">UNSUBSCRIBED_EVENT payload</a></li><li><a href="#data_event-payload" class="table-of-contents__link toc-highlight">DATA_EVENT payload</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="nav-footer spacer-y-4 pb-4" id="footer"><div class="container"><div class="justify-content-start row"><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">General</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://pointnetwork.io/page/about" class="text-white" target="_blank" rel="noopener noreferrer">About</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.io/" class="text-white" target="_blank" rel="noopener noreferrer">FAQ</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.io/page/social" class="text-white" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="py-0 py-md-1"><a href="/docs/build-index" class="text-white" target="_blank" rel="noopener noreferrer">Build</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.io/page/social" class="text-white" target="_blank" rel="noopener noreferrer">Careers</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Technology</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://pointnetwork.io/" class="text-white" target="_blank" rel="noopener noreferrer">Technology</a></li><li class="py-0 py-md-1"><a href="/docs/point-token" class="text-white" target="_blank" rel="noopener noreferrer">Token</a></li><li class="py-0 py-md-1"><a href="https://docs.google.com/document/d/16bcqsnezTKnPyYI7g32gEkrmJE35z8U4Zj0lUUXXQDY/edit" class="text-white" target="_blank" rel="noopener noreferrer">Whitepaper</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.io/files/PointNetworkBrochure-c003.pdf" class="text-white" target="_blank" rel="noopener noreferrer">Lightpaper</a></li></ul></div><div class="mb-3 mb-md-0 col-md-3 col-6"><h5 class="text-white">Community</h5><ul class="list-unstyled"><li class="py-0 py-md-1"><a href="https://pointnetwork.io/page/social" class="text-white" target="_blank" rel="noopener noreferrer">Community</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.github.io/docs/getting-started" class="text-white" target="_blank" rel="noopener noreferrer">Documentation</a></li><li class="py-0 py-md-1"><a href="https://pointnetwork.io/page/blog" class="text-white" target="_blank" rel="noopener noreferrer">Blog</a></li><li class="py-0 py-md-1"><a href="https://t.me/pointnetworkchat" class="text-white" target="_blank" rel="noopener noreferrer">Telegram Chat</a></li></ul></div><div class="px-lg-0 col-md-3"><ul class="list-social-links justify-content-around"><li class="text-white"><a href="https://twitter.com/pointnetwork" target="_blank" rel="noopener noreferrer"><i class="socicon-twitter"></i></a></li><li class="text-white"><a href="https://www.reddit.com/r/pointnetwork/" target="_blank" rel="noopener noreferrer"><i class="socicon-reddit"></i></a></li><li class="text-white"><a href="https://github.com/pointnetwork" target="_blank" rel="noopener noreferrer"><i class="socicon-github"></i></a></li><li class="text-white"><a href="https://www.youtube.com/channel/UCWZkr5qbQhmMtD4Zt374-FA" target="_blank" rel="noopener noreferrer"><i class="socicon-youtube"></i></a></li><li class="text-white"><a href="https://t.me/pointnetworkchat" target="_blank" rel="noopener noreferrer"><i class="socicon-telegram"></i></a></li></ul><p class="d-block text-white">Subscribe to the newsletter to hear about Point Network updates and events.</p><button type="button" class="btn btn-primary"><a href="https://pointnetwork.io/" target="_blank" style="color:white">Subscribe</a></button></div></div><div class="footer-legal align-items-end mt-5 pt-4 row"><div class="mb-2 mb-lg-0 col-lg-2"><a class="navbar-brand" href="https://pointnetwork.io" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 677.7 679" style="enable-background:new 0 0 677.7 679" xml:space="preserve" class="brand"><title>Point Network Logo</title><path fill="#fff" d="M338.9-.2C151.8-.2.1 151.8.1 339.3c0 187.6 151.7 339.6 338.8 339.6s338.8-152 338.8-339.6C677.7 151.8 526-.2 338.9-.2zm0 636.3c-163.5 0-296-132.9-296-296.7s132.6-296.7 296-296.7 296 132.8 296 296.7-132.5 296.7-296 296.7z"></path><path fill="#fff" d="M203.1 314.9h-18.6v22.5h18.6v-.1c1.9 0 3.7-.5 5.2-1.5 1.6-1.1 2.8-2.4 3.7-4.1 1-1.7 1.5-3.6 1.5-5.7 0-3.1-1-5.8-3.1-7.9-2.1-2.1-4.5-3.2-7.3-3.2zM290.8 317.4c-3.7-2.3-7.9-3.4-12.8-3.4s-9.2 1.1-13 3.4c-3.7 2.2-6.6 5.3-8.7 9.1-2.1 3.8-3.1 8.2-3.1 13 0 4.9 1 9.3 3.1 13.1 2.1 3.8 5 6.9 8.7 9.1 3.8 2.2 8.1 3.3 13 3.3 4.8 0 9.1-1.1 12.8-3.3 3.8-2.3 6.7-5.4 8.8-9.2 2.1-3.8 3.2-8.2 3.2-13 0-4.9-1.1-9.2-3.2-13-2.1-3.9-5.1-6.9-8.8-9.1z"></path><path fill="#fff" d="M337.1 97.4c-132.4 0-239.7 107.5-239.7 240.1 0 132.7 107.3 240.3 239.7 240.3s239.7-107.6 239.7-240.2c0-132.7-107.3-240.2-239.7-240.2zM222.3 336.9c-2 3.3-4.6 5.9-8 7.8-3.3 1.9-7 2.9-11 2.9h-18.8v26.9H173v-70.2h30.3v.1c4 0 7.6 1 11 2.9 3.3 1.9 6 4.4 8 7.7 2 3.2 3 6.9 3 10.9s-1 7.7-3 11zm89.5 16.8c-1.8 4.3-4.3 8.2-7.7 11.4-3.3 3.3-7.1 5.9-11.6 7.7-4.4 1.8-9.3 2.7-14.6 2.7-5.3 0-10.2-.9-14.7-2.7-4.5-1.9-8.3-4.4-11.6-7.7-3.3-3.3-5.8-7.1-7.6-11.4-1.8-4.4-2.7-9.2-2.7-14.2s.9-9.8 2.7-14.1c1.8-4.4 4.3-8.3 7.6-11.5 3.3-3.3 7.1-5.8 11.6-7.6 4.5-1.9 9.4-2.8 14.7-2.8 5.3 0 10.2.9 14.6 2.8 4.5 1.8 8.3 4.3 11.6 7.6 3.3 3.3 5.9 7.1 7.7 11.5 1.8 4.3 2.7 9 2.7 14.1s-.9 9.8-2.7 14.2zm32.8-39.3v60.2h-11.4v-70.2h11.4v10zm82.9 60.2H417l-41.5-51.3v51.3H364v-70.2h10.3l41.9 52.9V339c-.1-4-.2-7.9-.2-11.5v-23.1h11.5v70.2zm70.1-59.8h-21.5v59.8h-11.5v-59.8h-20.8v-10.4h53.8v10.4z"></path></svg></a></div><div class="col-lg-10"><ul class="list-unstyled d-flex flex-wrap list-pipe-separator"><li><a href="https://pointnetwork.io" class="text-white text-small" target="_blank" rel="noopener noreferrer">Copyright © 2022 Point Network Limited</a></li><li><a href="https://t.me/pointnetworkchat" class="text-white text-small" target="_blank" rel="noopener noreferrer">Telegram</a></li><li><a href="https://pointnetwork.io/pages/terms" class="text-white text-small" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://pointnetwork.io/pages/privacy" class="text-white text-small" target="_blank" rel="noopener noreferrer">Privacy</a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.2a9d12a5.js"></script>
<script src="/assets/js/main.a917dc54.js"></script>
</body>
</html>